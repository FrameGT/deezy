<table id=entries class=alt_rows cellspacing=0>
  <thead>
    <tr>
      <th><%= order @search, :by => :enabled, :as => 'On' %>
      <th><%= order @search, :by => :mac, :as => 'MAC' %>
      <th><%= order @search, :by => :ip, :as => 'IP' %>
      <th><%= order @search, :by => :itgid, :as => 'ITG ID' %>
      <th><%= order @search, :by => :room %>
      <th><%= order @search, :by => :hostname, :as => 'hostname' %>
      <th><%= order @search, :by => :uid, :as => 'UID' %>
      <th id=notes_th><%= order @search, :by => :notes %>
      <th style=min-width:35px> &nbsp; 
  <tbody>
    <% @entries.each do |entry| %>
      <tr>
        <td>
          <% if entry.enabled %>
            <span class=invisible>on</span>
            <%= image_tag 'on.png' %>
          <% else %>
            <span class=invisible>off</span>
            <%= image_tag 'off.png' %>
          <% end %>
        
        <td><%=h entry.mac %>
        <td><%=h entry.ip %>
        <td><%=h entry.itgid %>
        <td><%=h entry.room %>
        <td><%=h entry.hostname %>
        <td><%=h entry.uid %>
        <%#
        
          !!IMPORTANT!!
          
          The next line has to be on one line since the contents of notes_col are whitespace:pre-wrap.

        %> 
        <td class=notes_col><%=h entry.notes %><td class=show_edit>
          <%= link_to image_tag('show.png', :style => 'margin-top:2px'), entry, :title => 'Show' %><%= link_to image_tag('edit.png', :style => 'margin-top:2px'), edit_entry_path(entry), :title => 'Edit' %>
      
    <% end %>
</table>

<%= will_paginate @entries %>

<%
  per_page_links = []
  [15,25,50,100,200,'All'].each do |i|
    uri = request.request_uri.gsub(/per_page=\d+/,'')
    uri.chomp! '&'
    uri += (uri.index '?') ? '&' : '?'
    uri += "per_page=#{i}"
    per_page_links << "<a href='#{uri}'>#{i}</a>"
  end
%>

<p id="per_page"><%= per_page_links.join(' | ') %> per page</p>
